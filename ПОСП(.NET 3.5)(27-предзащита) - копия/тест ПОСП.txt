блок контроллер ГЕН
	описание
		Тг - скаляр;
	все описание
	алгоритм
НАЧ:		Тг := ВРЕМЯ + 0,9*30 + RAND*0,2*30;
		ждать ВРЕМЯ = Тг;
		создать объект ФАЗА типа скаляр; 
		ФАЗА:="свежая";
		создать объект S типа ссылка;
		S := ссылка на ФАЗА;
		активизировать инициатор из S направить на метку НАЧ блока МУЗЕЙ;
		направить инициатор на метку НАЧ;
	все алгоритм
все блок

блок процессор МУЗЕЙ
	описание
		Тож, СОСТ - скаляр;
		РАБ - скаляр блока РЕСТАВРАТОР;
	все описание
	алгоритм
		СОСТ := "свободен";
НАЧ:		Тож:= ВРЕМЯ + 0,9*100 + 0,2*100*RAND;
		ждать ВРЕМЯ = Тож;
		ИНИЦИАТОР-> скаляр := "нормальная";
НОРМ:	Тож:= ВРЕМЯ + 0,9*500 + 0,2*500*RAND;
		ждать ВРЕМЯ = Тож;
		ИНИЦИАТОР-> скаляр := "плохая";
		Тож := ВРЕМЯ + 0,9*100 + 0,2*100*RAND;
	ждать ВРЕМЯ = Тожто направить инициатор на метку М1
	ждать (СОСТ="свободен")/\(РАБ ="да") то направить инициатор на метку М2;

М1:		уничтожить ИНИЦИАТОР;

М2:		СОСТ:="занят";
		Тож := ВРЕМЯ + 0,9*50 + 0,2*50*RAND;	
		ждать ВРЕМЯ = Тож;
		ИНИЦИАТОР->скаляр := "нормальная";
		СОСТ:="свободен";
		направить инициатор на метку НОРМ;
	все алгоритм
все блок

блок агрегат РЕСТАВРАТОР
	описание
		РАБ,Тож - скаляр; // начальное состояние "да"
	все описание
	алгоритм
		РАБ := "да";
НАЧ:		Тож := ВРЕМЯ + 200;
		ждать ВРЕМЯ = Тож;
		РАБ := "нет";
		Тож := ВРЕМЯ + 10;
		ждать ВРЕМЯ = Тож;
		РАБ := "да";
		направить инициатор на метку НАЧ;
	все алгоритм
все блок