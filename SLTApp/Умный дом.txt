блок контроллер ДАТЧИКИ	  	  	  	  	  	  	  	  	  	  	  	  
	описание		//ВключенныеДатчики- вектор (1,2,3- скаляр );
		БылСбой1,Работает1- скаляр блока АВТОВЫК1;
		БылСбой2,Работает2- скаляр блока АВТОВЫК2;
		БылСбой3,Работает3- скаляр блока АВТОВЫК3;
		ВремяГен- скаляр;		// Время появления следующего показания;
		ИнтервалГен=10- скаляр;		// Интервал генерации показаний
		ПроцОшибок=20- скаляр;		// Процент ошибок
		Вероятность- скаляр;										
		// 1 ед модельного времени = 1 минута
	все описание
	алгоритм		/*нач:		ВключенныеДатчики(1) := "включен";		// Датчик влажности
		ВключенныеДатчики(2) := "включен";		// Датчик температуры
		ВключенныеДатчики(3) := "включен";		// Датчик еще чего то
*/
начало:	ВремяГен := ВРЕМЯ+ИнтервалГен*0,9+RAND*ИнтервалГен*0,2;
		ждать ВРЕМЯ=ВремяГен;
		Вероятность := RAND*100;
		если (Вероятность>ПроцОшибок) то направить инициатор на метку начало
		 иначе направить инициатор на метку сбой;

сбой:		создать объект Показание типа вектор (1,2- скаляр );
		создать объект ТипДатчика типа скаляр;
		ТипДатчика := ЦЕЛОЕ(1+RAND*3);
		если (ТипДатчика=1)/\(Работает1="да") то направить инициатор на метку Т1
		 если (ТипДатчика=2)/\(Работает2="да") то направить инициатор на метку Т2
		 если (ТипДатчика=3)/\(Работает3="да") то направить инициатор на метку Т3
		 иначе направить инициатор на метку Удал;

Т1:		Показание(1) := "Датчиквлажности";
		БылСбой1 := "да";
		направить инициатор на метку Далее;

Т2:		Показание(1) := "Датчиктемпературы";
		БылСбой2 := "да";
		направить инициатор на метку Далее;

Т3:		Показание(1) := "Датчикещечегото";
		БылСбой3 := "да";
		направить инициатор на метку Далее;

Далее:	Показание(2) := ВРЕМЯ;
		создать объект Ссылка типа ссылка;
		Ссылка := ссылка на Показание;
		активизировать инициатор из Ссылка направить на метку начало блока ОТПРАВКА;
		направить инициатор на метку начало;

Удал:		уничтожить ИНИЦИАТОР;
	все алгоритм
все блок

блок агрегат АВТОВЫК1	  	  	  	  
	описание
		БылСбой1="нет"- скаляр;
		Работает1="да"- скаляр;
		ВремяОткл- скаляр;
		ЗапрашивалВыключить- вектор (1,2,3- скаляр ) блока ПОЛЬЗОВАТЕЛЬ;								
	все описание
	алгоритм
нач:		ждать БылСбой1="да";
		ВремяОткл := ВРЕМЯ+600;
		ждать (ВРЕМЯ=ВремяОткл)\/(ЗапрашивалВыключить(1)="да");
		Работает1 := "нет";
		уничтожить ИНИЦИАТОР;
	все алгоритм
все блок

блок агрегат АВТОВЫК2	  	  	  	  
	описание
		БылСбой2="нет"- скаляр;
		Работает2="да"- скаляр;
		ВремяОткл- скаляр;
		ЗапрашивалВыключить- вектор (1,2,3- скаляр ) блока ПОЛЬЗОВАТЕЛЬ;								
	все описание
	алгоритм
нач:		ждать БылСбой2="да";
		ВремяОткл := ВРЕМЯ+600;
		ждать (ВРЕМЯ=ВремяОткл)\/(ЗапрашивалВыключить(2)="да");
		Работает2 := "нет";
		уничтожить ИНИЦИАТОР;
	все алгоритм
все блок

блок агрегат АВТОВЫК3	  	  	  	  
	описание
		БылСбой3="нет"- скаляр;
		Работает3="да"- скаляр;
		ВремяОткл- скаляр;
		ЗапрашивалВыключить- вектор (1,2,3- скаляр ) блока ПОЛЬЗОВАТЕЛЬ;								
	все описание
	алгоритм
нач:		ждать БылСбой3="да";
		ВремяОткл := ВРЕМЯ+600;
		ждать (ВРЕМЯ=ВремяОткл)\/(ЗапрашивалВыключить(3)="да");
		Работает3 := "нет";
		уничтожить ИНИЦИАТОР;
	все алгоритм
все блок

блок процессор ОТПРАВКА	  	  	  	  	  	  	  	  	  	  	  	  
	описание
		ВремяПол- скаляр;		// Время получения сообщения пользователем
		ВремяПер=0,5- скаляр;		// Временя передачи
		ПроверяетПочту- скаляр блока ПОЛЬЗОВАТЕЛЬ;
		ЗапрашивалВыключить- вектор (1,2,3- скаляр ) блока ПОЛЬЗОВАТЕЛЬ;
		ВключенныеДатчики- вектор (1,2,3- скаляр ) блока ДАТЧИКИ;																								
	все описание
	алгоритм		// передача сообщения через сеть
начало:	ВремяПол := ВРЕМЯ+ВремяПер*0,8+RAND*ВремяПер*0,4;
		ждать ВРЕМЯ=ВремяПол;		// сообщение получено, ждем пока пользователь его прочтет
		ждать (ПроверяетПочту="да");
		если (ИНИЦИАТОР-> вектор (1)="Датчиквлажности")/\(ЗапрашивалВыключить(1)="нет") то направить инициатор на метку Ответ1
		 если (ИНИЦИАТОР-> вектор (1)="Датчиктемпературы")/\(ЗапрашивалВыключить(2)="нет") то направить инициатор на метку Ответ2
		 если (ИНИЦИАТОР-> вектор (1)="Датчикещечегото")/\(ЗапрашивалВыключить(3)="нет") то направить инициатор на метку Ответ3
		 иначе направить инициатор на метку Удалить;

Ответ1:	ЗапрашивалВыключить(1) := "да";		/*ВремяПол := ВРЕМЯ+ВремяПер*0,8+RAND*ВремяПер*0,4;
		ждать ВРЕМЯ=ВремяПол;
		ВключенныеДатчики(1) := "выключен";*/
		направить инициатор на метку Удалить;

Ответ2:	ЗапрашивалВыключить(2) := "да";		/*ВремяПол := ВРЕМЯ+ВремяПер*0,8+RAND*ВремяПер*0,4;
		ждать ВРЕМЯ=ВремяПол;
		ВключенныеДатчики(2) := "выключен";*/
		направить инициатор на метку Удалить;

Ответ3:	ЗапрашивалВыключить(3) := "да";		/*ВремяПол := ВРЕМЯ+ВремяПер*0,8+RAND*ВремяПер*0,4;
		ждать ВРЕМЯ=ВремяПол;
		ВключенныеДатчики(3) := "выключен";*/
		направить инициатор на метку Удалить;

Удалить:	уничтожить ИНИЦИАТОР;
	все алгоритм
все блок

блок агрегат ПОЛЬЗОВАТЕЛЬ	  	  	  	  	  	  	  	  	  	  	  	  
	описание
		ПроверяетПочту="нет"- скаляр;
		ЗапрашивалВыключить- вектор (1,2,3- скаляр );
		ВремяПроверки- скаляр;
		ИнтервалПроверки=600- скаляр;
		РазбросПроверки=300- скаляр;																								 
		//Пользователь проверяет сообщения в интервале от 5 до 15 часов;
	все описание
	алгоритм
Нач:		ЗапрашивалВыключить(1) := "нет";
		ЗапрашивалВыключить(2) := "нет";
		ЗапрашивалВыключить(3) := "нет";
		ВремяПроверки := ВРЕМЯ+(ИнтервалПроверки-РазбросПроверки)+RAND*РазбросПроверки*2;
		ждать ВРЕМЯ=ВремяПроверки;
		ПроверяетПочту := "да";
		ВремяПроверки := ВРЕМЯ+3;		// Проверяет почту в течение 3 мин
		ждать ВРЕМЯ=ВремяПроверки;
		ПроверяетПочту := "нет";
		направить инициатор на метку Нач;
	все алгоритм
все блок